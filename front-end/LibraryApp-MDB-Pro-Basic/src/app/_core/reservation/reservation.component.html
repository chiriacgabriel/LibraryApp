<div class="row text-center">
  <div class="col-md-4">
    <div class="btn-group">
      <div
        class="btn btn-primary"
        mwlCalendarPreviousView
        [view]="view"
        [(viewDate)]="viewDate"
        (viewDateChange)="closeOpenMonthViewDay()"
      >
        Previous
      </div>
      <div
        class="btn btn-outline-secondary"
        mwlCalendarToday
        [(viewDate)]="viewDate"
      >
        Today
      </div>
      <div
        class="btn btn-primary"
        mwlCalendarNextView
        [view]="view"
        [(viewDate)]="viewDate"
        (viewDateChange)="closeOpenMonthViewDay()"
      >
        Next
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <h3>{{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}</h3>
  </div>
  <div class="col-md-4">
    <div class="btn-group">
      <div
        class="btn btn-primary"
        (click)="setView(CalendarView.Month)"
        [class.active]="view === CalendarView.Month"
      >
        Month
      </div>
      <div
        class="btn btn-primary"
        (click)="setView(CalendarView.Week)"
        [class.active]="view === CalendarView.Week"
      >
        Week
      </div>
      <div
        class="btn btn-primary"
        (click)="setView(CalendarView.Day)"
        [class.active]="view === CalendarView.Day"
      >
        Day
      </div>
    </div>
  </div>
</div>
<br/>
<div [ngSwitch]="view">
  <mwl-calendar-month-view
    *ngSwitchCase="CalendarView.Month"
    [viewDate]="viewDate"
    [events]="events"
    [refresh]="refresh"
    [activeDayIsOpen]="activeDayIsOpen"
    (dayClicked)="dayClicked($event.day, reservationFrame)"
    (eventClicked)="handleEvent('Clicked', $event.event)"
    (eventTimesChanged)="eventTimesChanged($event)"
  >
  </mwl-calendar-month-view>
  <mwl-calendar-week-view
    *ngSwitchCase="CalendarView.Week"
    [viewDate]="viewDate"
    [events]="events"
    [refresh]="refresh"
    (eventClicked)="handleEvent('Clicked', $event.event)"
    (eventTimesChanged)="eventTimesChanged($event)"
  >
  </mwl-calendar-week-view>
  <mwl-calendar-day-view
    *ngSwitchCase="CalendarView.Day"
    [viewDate]="viewDate"
    [events]="events"
    [refresh]="refresh"
    (eventClicked)="handleEvent('Clicked', $event.event)"
    (eventTimesChanged)="eventTimesChanged($event)"
  >
  </mwl-calendar-day-view>
</div>
<div mdbModal #reservationFrame="mdbModal" class="modal fade right" tabindex="-1" role="dialog"
     aria-labelledby="myBasicModalLabel"
     aria-hidden="true">
  <div class="modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close pull-right" aria-label="Close" (click)="reservationFrame.hide()">
          <span aria-hidden="true">Ã—</span>
        </button>
        <h4 class="modal-title w-100" id="myModalLabel">Reservation</h4>
      </div>
      <div class="modal-body">
        <ng-container *ngIf="reservationForm">
          <form (ngSubmit)="addReservation(reservationFrame)" [formGroup]="reservationForm">
            <table class="table table-hover">
              <thead>
              <tr>
                <th>Start Date:</th>
                <th>End Date:</th>
                <th>Employee</th>
                <th>State</th>
              </tr>
              </thead>
              <tbody>
              <tr>
                <td>
                  <input type="date" class="form-control" formControlName="startDate">
                </td>
                <td>
                  <input type="date" class="form-control" formControlName="endDate">
                </td>
                <td>{{currentUser.email}}</td>
                <td>
                  <mdb-select-2 formControlName="reservationState" >
                    <mdb-select-option *ngFor="let state of reservationStateList" [value]="state">
                      {{state.nameOfState}}
                    </mdb-select-option>
                  </mdb-select-2>
                </td>
              </tr>
              </tbody>
            </table>
            <div class="row">
              <div class="col-md-2">
                <div class="md-form">
                  <mdb-card-text>
                    Client:
                  </mdb-card-text>
                </div>
              </div>
              <div class="col-sm-7">
                <div class="md-form">
                  <mdb-select-2 placeholder="Select Client" formControlName="client">
                    <mdb-select-filter [ngModel]="searchClient | async" (ngModelChange)="searchClient.next($event)" formControlName="client">
                    </mdb-select-filter>
                    <mdb-select-option *ngFor="let client of filteredOptionsClient | async" [value]="client" >
                      {{client.firstName}} {{client.lastName}}
                    </mdb-select-option>
                  </mdb-select-2>
                </div>
              </div>
              <div class="col-md-3 mr-auto">
                <div class="md-form">
                  <button mdbBtn type="button" color="default" size="md" mdbWavesEffect>Add Client
                    <mdb-icon fas icon="plus" class="ml-1"></mdb-icon>
                  </button>
                </div>
              </div>
            </div>
            <ng-container *ngIf="bookForm">
              <form [formGroup]="bookForm">
                <div class="row">
                  <table class="table table-hover">
                    <thead>
                    <tr>
                      <th>Book</th>
                      <th>Action</th>
                    </tr>
                    </thead>
                    <tbody>
                    <td>
                      <button (click)="onAddRow()" *ngIf="bookForm.get('bookTableRows')" mdbBtn type="button" color="default" size="md" mdbWavesEffect >Add Book
                        <mdb-icon fas icon="plus" class="ml-1"></mdb-icon>
                      </button>
                    </td>
                    <tr *ngFor="let row of bookTableRows.controls; let index = index;" formArrayName="bookTableRows">
                      <td  class="col-md-6">
                        <mdb-select-2 placeholder="Select book"  [formControl]="row.get('bookList')">
                          <!--                    <mdb-select-filter></mdb-select-filter>-->
                          <mdb-select-option *ngFor="let book of bookList "
                                             [value]="book">{{book.title}}</mdb-select-option>
                        </mdb-select-2>
                      </td>
                      <td class="col-md-6">
                        <button mdbBtn type="button" color="danger" size="sm" mdbWavesEffect (click)="onRemoveRow(index)" >
                          <i class="far fa-trash-alt fa-lg"></i>
                        </button>
                      </td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </form>
            </ng-container>
            <div class="modal-footer text-left">
              <button type="submit" mdbBtn color="primary" class="relative waves-light" mdbWavesEffect>Save
                <i class="far fa-save fa-lg ml-1"></i>
              </button>
              <button type="button" mdbBtn color="light" class="relative waves-light" aria-label="Close" (click)="reservationFrame.hide()" mdbWavesEffect>Cancel
                <i class="fas fa-times fa-lg ml-1"></i></button>
            </div>
          </form>
        </ng-container>
      </div>
    </div>
  </div>
</div>
